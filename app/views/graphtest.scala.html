@main("GraphTest") {

    <div id="cy"></div>
    <div id="node_content"></div>

    <script>
            $(function () {

                var cy = window.cy = cytoscape({
                    container: document.getElementById('cy'),

                    layout: {
                        name: 'dagre'
//                idealEdgeLength: 10,
//                nodeOverlap: 10
                    },

                    style: [
                        {
                            "selector": "core",
                            "style": {
                                "selection-box-color": "#AAD8FF",
                                "selection-box-border-color": "#8BB0D0",
                                "selection-box-opacity": "0.5"
                            }
                        },
                        {
                            "selector": "node",
                            "style": {
//                               "width": "mapData(score, 0, 0.006769776522008331, 20, 60)",
                                //"height": "mapData(score, 0, 0.006769776522008331, 20, 60)",
                                "width": "label",
                                "shape":"roundrectangle",
                                "content": "data(name)",
                                "font-family": "inherit",
                                "font-size": "12px",
                                "text-valign": "center",
                                "text-halign": "center",
//                                "text-outline-color": "#777",
//                                "text-outline-width": "2px",
                                "border-width":"2px",
                                "background-color":"#ddd",
                                "border-color": "#7e7e7e",
                                "color": "#555",
                                "overlay-padding": "6px",
                                "z-index": "10"
                            }
                        },
                        {
                            selector: 'edge',
                            style: {
                                'width': 4,
                                'target-arrow-shape': 'triangle',
                                'line-color': '#e0e0e0',
                                'target-arrow-color': '#e0e0e0',
                                'curve-style': 'bezier'
                            }
                        }
                    ],

                    elements: @Html(Article.toJsonTest)

                });

//                cy.nodes().forEach(function(n){
//                    var label = n.data('content');
//
//                    n.qtip({
//                        content: {
//                            text: label
//                        },
//                        position: {
//                            my: 'top center',
//                            at: 'bottom center'
//                        },
//                        style: {
//                            classes: 'qtip-bootstrap',
//                            tip: {
//                                width: 100,
//                                height: 10
//                            }
//                        }
//                    });
//                })

                cy.nodes().on("click", function(){
                    console.log(this.data('name'));
                    $('#node_content').html("<h2>"+this.data('name')+"<h2/>" + this.data('content'));
                })

            });

    </script>
}